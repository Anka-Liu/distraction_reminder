# 摸鱼网站控制器 Chrome/Edge 扩展

基于 Vue 3 开发的浏览器扩展，帮助你控制在"摸鱼网站"上花费的时间。当倒计时结束时，自动跳转到指定的工作网站。

## 功能特性

- ✅ 添加多个摸鱼网站进行监控
- ✅ 为每个网站设置独立的倒计时
- ✅ 在页面右下角实时显示倒计时
- ✅ 支持延时功能（1分钟、5分钟、10分钟、30分钟、1小时）
- ✅ 统计每个网站的总摸鱼时间
- ✅ 倒计时结束自动跳转到指定网址
- ✅ 支持 Chrome 和 Edge 浏览器

## 项目结构

```
distraction-controller-extension/
├── public/
│   ├── manifest.json          # 扩展清单文件
│   ├── content.css            # 内容脚本样式
│   └── icon*.png              # 扩展图标（需要自己添加）
├── src/
│   ├── OptionsApp.vue         # 设置页面主组件
│   ├── options-main.js        # 设置页面入口
│   ├── background.js          # 后台服务脚本
│   ├── content.js             # 内容脚本
│   └── style.css              # 全局样式
├── options.html               # 设置页面HTML
├── vite.config.js             # Vite 构建配置
└── package.json               # 项目依赖
```

## 开发说明

### 安装依赖

```bash
npm install
```

### 构建扩展

```bash
npm run build
```

构建完成后，会在 `dist` 目录生成扩展文件。

### 安装到浏览器

#### Chrome 浏览器

1. 打开 Chrome 浏览器
2. 访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目的 `dist` 目录

#### Edge 浏览器

1. 打开 Edge 浏览器
2. 访问 `edge://extensions/`
3. 开启左下角的"开发人员模式"
4. 点击"加载解压缩的扩展"
5. 选择项目的 `dist` 目录

## 使用说明

### 1. 设置摸鱼网站

1. 右键点击扩展图标，选择"选项"或"设置"
2. 在设置页面顶部设置"倒计时结束跳转网址"（默认是 Google）
3. 在"添加摸鱼网站"区域输入：
   - 网站名称（如：哔哩哔哩）
   - 网站URL（如：bilibili.com）
   - 默认时长（秒）（如：600 = 10分钟）
4. 点击"添加"按钮

### 2. 使用倒计时

1. 访问你添加的摸鱼网站
2. 页面右下角会自动显示倒计时
3. 倒计时会随着你浏览网站而减少
4. 如果需要更多时间，在设置页面选择延时时长，点击"延时"按钮
5. 倒计时结束后，页面会自动跳转到你设置的目标网址

### 3. 管理网站

在设置页面的摸鱼网站列表中，你可以：
- 查看当前倒计时和总摸鱼时间
- 选择延时时长并点击"延时"按钮
- 点击"重置"按钮恢复默认时长
- 点击"删除"按钮移除网站

## 注意事项

### 图标文件

本项目需要三个尺寸的图标文件，请在 `public` 目录下添加：
- `icon16.png` (16x16 像素)
- `icon48.png` (48x48 像素)
- `icon128.png` (128x128 像素)

你可以使用任何图像编辑工具创建这些图标，或使用在线图标生成器。

### URL 匹配规则

URL 匹配使用 `includes()` 方法，所以：
- 输入 `bilibili.com` 会匹配 `https://www.bilibili.com/video/xxx`
- 输入 `youtube.com` 会匹配 `https://www.youtube.com/watch?v=xxx`
- 建议使用域名而不是完整URL，以匹配该网站的所有页面

### 数据存储

所有设置和计时数据存储在浏览器的 `chrome.storage.local` 中，即使关闭浏览器也会保留。

## 技术栈

- **Vue 3** - 前端框架
- **Vite** - 构建工具
- **Chrome Extension Manifest V3** - 扩展API

## 开发模式

如果需要开发调试，可以：

1. 修改源代码后运行 `npm run build`
2. 在浏览器扩展页面点击"重新加载"按钮
3. 刷新正在访问的网站以应用更新

## 常见问题

**Q: 倒计时不显示？**
A: 确保你访问的URL包含你添加的网站URL字符串，并且扩展有足够的权限。

**Q: 跳转不生效？**
A: 检查设置页面的跳转URL是否正确，必须是完整的URL（包含 https://）。

**Q: 修改设置后不生效？**
A: 刷新正在访问的摸鱼网站页面，让新设置生效。

## License

MIT
